#####################################################################
# LParse
#####################################################################

CC          = @CC@
AR          = @AR@
RANLIB      = @RANLIB@
prefix      = @prefix@
exec_prefix = @exec_prefix@
RPATH       = @RPATH@
SO          = @SO@
CCSHARED    = @CCSHARED@
LDSHARED    = @LDSHARED@
YACC        = @YACC@

INCLUDE     = -I. -I../Swig -I../DOH/Include -I../Preprocessor

SRCS = cscanner.c type.c
OBJS = parser.o cscanner.o type.o

.c.o: 
	$(CC) $(CCSHARED) $(INCLUDE) $(CFLAGS) -c -o $*.o $<

#####################################################################
# TARGET: experiment
#####################################################################
# friendly to the toplevel makefile
experiment:  $(OBJS)
	for i in $(OBJS); do echo Source/LParse/$$i >> $(OBJS_FILE); done

parser.o: parser.c
	$(CC) $(CCSHARED) $(INCLUDE) $(CFLAGS) -c -o $*.o $<

parser.c: parser.y   
	$(YACC) -d parser.y
	@cp y.tab.h lyacc.h
	@cp y.tab.c parser.c

clean:
	rm -f *.o *~ core *.so *.a y.tab*

