# ---------------------------------------------------------------
# $Header$
#----------------------------------------------------------------

SRCS          = types.c scanner.c include.c getopt.c misc.c super.c
OBJS          = types.o scanner.o include.o getopt.o misc.o super.o

prefix        = @prefix@
exec_prefix   = @exec_prefix@

CC            = @CC@
AR            = @AR@
RANLIB        = @RANLIB@
CFLAGS        = @CFLAGS@
INCLUDE       = -I. -I../DOH/Include
TARGET        = libswig.a

.c.o: 
	$(CC) $(CFLAGS) $(INCLUDE) -c -o $*.o $<

all: $(TARGET)

$(TARGET): $(OBJS)
	$(AR) cr $(TARGET) $(OBJS)
	$(RANLIB) $(TARGET)

supertest: super.c
	$(CC) $(CCSHARED) $(INCLUDE) $(CFLAGS) -g -DSUPER_TEST -c \
		-o supertest.o super.c
	$(CC) supertest.o -ldoh -o supertest

typetest: type.c super.o
	$(CC) $(CCSHARED) $(INCLUDE) $(CFLAGS) -g -DTYPE_TEST -c \
		-o typetest.o type.c
	$(CC) typetest.o super.o -ldoh -o typetest

clean:
	rm -f *.o *~ core *.so *.a *_wrap.*

