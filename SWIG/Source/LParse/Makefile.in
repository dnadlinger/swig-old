#####################################################################
# $Header$
#
# LParse
#####################################################################

srcdir = @srcdir@
VPATH  = @srcdir@

CC          = @CC@
CFLAGS      = @CFLAGS@
AR          = @AR@
RANLIB      = @RANLIB@
YACC        = @YACC@

INCLUDE     = -I$(srcdir)/.                     \
              -I$(srcdir)/../Swig               \
              -I$(srcdir)/../DOH/Include        \
              -I$(srcdir)/../Preprocessor

SRCS = cscanner.c
OBJS = parser.o cscanner.o
TARGET = liblparse.a

.c.o:
	$(CC) $(CFLAGS) $(INCLUDE) -c -o $*.o $<

all: $(TARGET)

$(TARGET): $(OBJS)
	$(AR) cr $(TARGET) $(OBJS)
	$(RANLIB) $(TARGET)

parser.o: parser.c
	$(CC) $(CFLAGS) $(INCLUDE) -c -o $*.o $<

parser.c: parser.y
	$(YACC) @YFLAGS@ parser.y
	@cp y.tab.h lyacc.h
	@cp y.tab.c parser.c

clean:
	rm -f *.o *~ core *.so *.a y.tab*
